<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <title>Darwin.js</title>
    <link rel="stylesheet" href="styles.css">

    <script type="text/template" id="ea-configuration-view">
        <label>
            Population size:
            <select class="population-size">
                <option value="50">50</option>
                <option value="100" selected="selected">100</option>
                <option value="250">250</option>
            </select>
        </label>
        <br/><br/>
        <button class="start">Start</button>
        <button class="reset" disabled="disabled">Reset</button>
    </script>

    <script type="text/template" id="generations-table-view">
        <thead>
            <tr>
                <th colspan="5" style="font-size: 1.4em; width: 200px; text-align: center;">Generations</th>
            </tr>
            <tr>
                <th>#</th>
                <th>Best Candidate</th>
                <th>Best Fitness</th>
                <th>Average Fitness</th>
            </tr>
        </thead>
        <tbody></tbody>
    </script>

    <script type="text/template" id="population-table-view">
        <thead>
            <tr>
                <th colspan="3" style="font-size: 1.4em; width: 200px; text-align: center;">Population</th>
            </tr>
            <tr>
                <th>#</th>
                <th>Best Candidate</th>
                <th>Fitness</th>
            </tr>
        </thead>
        <tbody></tbody>
    </script>

    <script type="text/template" id="candidate-row-view">
        <td><%= id %></td>
        <td><%= candidate %></td>
        <td><%= fitness %></td>
    </script>

    <script type="text/template" id="generation-row-view">
        <td><%= id %></td>
        <td><%= bestCandidate %></td>
        <td><%= bestCandidateFitness %></td>
        <td><%= averageFitness.toFixed(2) %></td>
    </script>

    <script type="text/template" id="generation-row-view-in-progress">
        <td><%= id %></td>
        <td>In progress...</td>
        <td></td>
        <td></td>
    </script>

    <script type="text/template" id="generation-details-view">
        <!--<div class="population-details-stats">-->
            <!--<p>Generation:      <%= id %></p>-->
            <!--<p>Best candidate:  <%= bestCandidate %></p>-->
            <!--<p>Best fitness:    <%= bestCandidateFitness %></p>-->
            <!--<p>Average fitness: <%= averageFitness %></p>-->
        <!--</div>-->
    </script>

    <script type="text/template" id="generation-details-view-empty">
        <!--<div class="population-details-stats">-->
            <!--<div>Empty</div>-->
        <!--</div>-->
    </script>

    <script type="text/template" id="candidate-details-view">
        <p>Candidate Details View</p>
        <p>ID: <%= id %></p>
        <p>Fitness: <%= fitness %></p>
        <p>String: <%= candidate %></p>
    </script>

    <script type="text/template" id="candidate-details-view-empty">
        <p>Empty</p>
    </script>

</head>
<body>
    <script src="../../lib/jquery-2.1.1.js"></script>
    <script src="../../lib/underscore.js"></script>
    <script src="../../lib/backbone.js"></script>
    <script src="../../src/darwin.js"></script>
    <script src="../../src/darwin-ui.js"></script>
    <script src="../../src/selection.js"></script>
    <script src="../../src/operators.js"></script>
    <script src="../../src/utils.js"></script>
    <script src="../../src/termination.js"></script>
    <script src="string-evolver.js"></script>
    <script>
    (function() {
        var charPool = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        var wordToFind = "HELLO";
        var stringEvolver = new Darwin.GA({
            populationSize: 100,
            genIndFunc: StringEvolver.createRandomStringGenerator(charPool, wordToFind.length),
            fitnessFunction: StringEvolver.createWordFitnessFunction(wordToFind),
            reproduce: Darwin.Operators.singlePointCrossover,
            mutate: StringEvolver.randomCharacterMutation,
            terminationConditions: [new Darwin.Termination.TargetFitness(wordToFind.length)]
        });
        var dashboardView = new DashboardView(stringEvolver);
        $("body").prepend(dashboardView.render().el);
    })();
    </script>
</body>
</html>
