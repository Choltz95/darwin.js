<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <title>Darwin.js</title>
    <link rel="stylesheet" href="styles.css">

    <script type="text/template" id="ea-configuration-view">
        <p class="widget-title">Evolutionary Algorithm<br/>Configuration</p>
        <div class="widget-content">
            <label>
                Population size:
                <select class="population-size">
                    <option value="50">50</option>
                    <option value="100" selected="selected">100</option>
                    <option value="250">250</option>
                    <option value="500">500</option>
                    <option value="1000">1000</option>
                </select>
            </label>
            <br/><br/>
            <button class="start">Start</button>
            <button class="reset" disabled="disabled">Reset</button>
        </div>
    </script>

    <script type="text/template" id="generations-table-view">
        <thead>
            <tr>
                <th colspan="4" class="table-title">Generations</th>
            </tr>
            <tr>
                <th>#</th>
                <th>Best Individual</th>
                <th>Best Fitness</th>
                <th>Avg. Fitness</th>
            </tr>
        </thead>
        <tbody></tbody>
    </script>

    <script type="text/template" id="population-table-view">
        <thead>
            <tr>
                <th colspan="3" class="table-title">Population</th>
            </tr>
            <tr>
                <th>#</th>
                <th>Phenotype</th>
                <th>Fitness</th>
            </tr>
        </thead>
        <tbody></tbody>
    </script>

    <script type="text/template" id="individual-row-view">
        <td><%= id %></td>
        <td><%= phenotype %></td>
        <td><%= fitness %></td>
    </script>

    <script type="text/template" id="generation-row-view">
        <td><%= id %></td>
        <td><%= bestIndividual %></td>
        <td><%= bestIndividualFitness %></td>
        <td><%= averageFitness.toFixed(2) %></td>
    </script>

    <script type="text/template" id="generation-row-view-in-progress">
        <td><%= id %></td>
        <td>In progress...</td>
        <td></td>
        <td></td>
    </script>

    <script type="text/template" id="individual-details-view">
        <div class="widget-title">Individual</div>
        <div class="widget-content">
            <p>ID: <%= id %></p>
            <p>Phenotype: <%= phenotype %></p>
            <p>Fitness: <%= fitness %></p>
        </div>
    </script>

</head>
<body>
    <script src="../../lib/jquery-2.1.1.js"></script>
    <script src="../../lib/underscore.js"></script>
    <script src="../../lib/backbone.js"></script>
    <script src="../../src/darwin.js"></script>
    <script src="../../src/darwin-ui.js"></script>
    <script src="../../src/selection.js"></script>
    <script src="../../src/operators.js"></script>
    <script src="../../src/utils.js"></script>
    <script src="../../src/termination.js"></script>
    <script src="string-evolver.js"></script>
    <script>
    (function() {
        var charPool = "ABCDEFGHIJKLMNOPQRSTUVWXYZ ";
        var wordToFind = "HELLO WORLD";
        var stringEvolver = new Darwin.GA({
            populationSize: 100,
            genIndFunc: StringEvolver.createRandomStringGenerator(charPool, wordToFind.length),
            fitnessFunction: StringEvolver.createWordFitnessFunction(wordToFind),
            reproduce: Darwin.Operators.singlePointCrossover,
            mutate: StringEvolver.createRandomCharacterMutation(charPool),
            terminationConditions: [new Darwin.Termination.TargetFitness(wordToFind.length)]
        });
        var dashboardView = new DashboardView({
            ga: stringEvolver,
            phenotypeView: StringEvolver.createStringDiffView(wordToFind)
        });
        $("body").prepend(dashboardView.render().el);
    })();
    </script>
</body>
</html>
